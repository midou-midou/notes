# 列表渲染

```HTML
<li v-for="(p,index) of persons" :key="index">
    {{p.name}}-{{p.age}}
    <input type="text">
</li>
```

根据上面的代码，渲染的每一个 **`li`**都要传入一个 **`key`**

### 上面代码的引入

当生成虚拟DOM时，key要作为唯一的标识，生成新的真实DOM前要用虚拟DOM和已有DOM比对，vue仅仅会生成没有的DOM，不会重复渲染已经在页面上的DOM。如何知道这个DOM有没有变化，key就作为有没有变化的重要依据

### 对比规则

- **旧虚拟DOM中找到了与新虚拟DOM相同的key：**
  若虚拟DOM中内容没变, 直接使用之前的真实DOM 若虚拟DOM中内容变了, 则生成新的真实DOM，随后替换掉页面中之前的真实DOM

- **旧虚拟DOM中未找到与新虚拟DOM相同的key：**
  创建新的真实DOM，随后渲染到到页面

### 如果用index作为列表每一项的key

当对数据进行，**逆序添加、逆序删除等破坏顺序操作**。会产生没有必要的真实DOM更新 ==> 界面效果没问题, 但效率低

如果结构中还包含输入类的DOM，会产生错误DOM更新 ==> 界面有问题

### key的选择

- 每条数据的唯一标识作为key

- 不存在上述破话列表顺序的操作，则可以用index作为key
